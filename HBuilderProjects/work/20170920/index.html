<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>昆山8</title>
    <link rel="stylesheet" href="http://n.sinaimg.cn/7106709f/20150922/swiper.min.css">
    <link rel="stylesheet" href="http://n.sinaimg.cn/7106709f/20150922/animate.min.css">
    <link rel="stylesheet" href="http://n.sinaimg.cn/a70720e1/20151027/new_file.css">
    <link rel="stylesheet" href="http://n.sinaimg.cn/a70720e1/20151027/ani.css">
    <script type="text/javascript" charset="utf-8" src="https://8.baidu.com/assets/js/component/adaptive/adaptive-version2.js"></script>
    <script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js?v=2.0"></script>
    <!--<link rel="stylesheet" type="text/css" href="http://n.sinaimg.cn/jiangsu/defb042b/20170919/aui.css"/>-->
    <link rel="stylesheet" type="text/css" href="http://n.sinaimg.cn/jiangsu/defb042b/20170919/aui1.css"/>
    <link rel="stylesheet" href="http://n.sinaimg.cn/jiangsu/defb042b/20170919/intial.css" />
    <style>
        html, body {position: relative;height: 100%;}
        body {background: #eee;font-family:Microsoft YaHei;font-size: 14px;  color:#000;  margin: 0;  padding: 0;  }
        .swiper-container {  width:6.4rem;  height: 100%;  }
        .swiper-slide {  text-align: center;  font-size: 18px;  }
        .ani{position: absolute;}
        .arrow {  -webkit-animation: arrow 1.5s ease-out infinite 0s;animation: arrow 1.5s ease-out infinite 0s;  display: inline-block;width: .5rem;height: .3rem; position: absolute;bottom:5px;left: 53%;margin-left: -.5rem;  z-index: 999;  }
        .arrow_open {  -webkit-animation: arrow 1.5s ease-out infinite 0s;animation: arrow 1.5s ease-out infinite 0s;  display: inline-block;  z-index: 999;  }
        @-webkit-keyframes arrow { 0% {opacity: 1;-webkit-transform: translate3d(0,0,0)} 50% {opacity: 1; -webkit-transform: translate3d(0,-20px,0)} 100% { opacity: 0;-webkit-transform: translate3d(0,-20px,0)}}
        @keyframes arrow { 0% {opacity: 1; transform: translate3d(0,0,0)} 50% { opacity: 1;transform: translate3d(0,-20px,0)} 100% {opacity: 0;transform: translate3d(0,-20px,0)}}
        @-webkit-keyframes moveRo { from {-webkit-transform: rotate(360deg);  } to { -webkit-transform: rotate(-360deg); } }
        @keyframes moveRo { from {  transform: rotate(-360deg)} to {  transform: rotate(360deg); } }

        @-webkit-keyframes openRo { from { } to { -webkit-transform: translateY(100%);} }
        @keyframes openRo { from { } to { -webkit-transform: translateY(100%) ; transform: translateY(100%);  } }
        @-webkit-keyframes openIconRo { 0% { -webkit-transform: translateY(100%); opacity:0;} 50% { -webkit-transform: translateY(0%); opacity:0.5;} 100% { -webkit-transform: translateY(-100%); opacity:0;} }
        @keyframes openIconRo { 0% { -webkit-transform: translateY(100%);  transform: translateY(100%);  opacity:0;  } 50% { -webkit-transform: translateY(0%); transform: translateY(0%); opacity:0.5;} 100% { -webkit-transform: translateY(-100%); transform: translateY(-100%); opacity:0;} }
        .music{  position: absolute;  z-index: 1111;  left: 90%;  top: 1px;  z-index: 1000;  }
        .open{ /*-webkit-animation: moveIconRo ease 3.5s both infinite;*/  -webkit-animation: moveRo linear 3.5s  infinite;  animation-delay:0;  }
        .icon-music{  width: 25px;  height: 25px;  background: url(http://n.sinaimg.cn/7106709f/20150925/icon-muisc.png);  background-size: 100% 100%;  display: block;  }
        .music-span{  position: absolute;  top: -5px;  left: 6px;  width: 12px;  height: 12px;  background: url(http://n.sinaimg.cn/7106709f/20150925/music-span.png);  background-size: 100% 100%;  -webkit-animation: openIconRo ease 1.2s both infinite;  animation: openRo ease 1.2s both infinite;  z-index: -1;  }
        .music_text {  color: #000;  margin-left: 5px;  font-size: 20px;  opacity: 0;  }
        .ani{position: absolute;}
        .file {  display: inline-block;  background: url(http://n.sinaimg.cn/jiangsu/2017ks/upload1.png) no-repeat center;  background-size: 100%;  width: 2.38rem;  height: 1.06rem;  left: 0.78rem;  top: 85%;  }
        .file input {  position: absolute;  font-size: 100px;  right: 0;  top: 0;  opacity: 0;  }
        /*截图上传页面*/
        .clipbg{  position: fixed;  background: black;  top: 0;  z-index: 999;  width: 100%;  height: 100%;  left: 0;  }
        .loading{  position: absolute;  top: 40%;  width: 38%;  left: 31%;  height: 1.6rem;  line-height: 1.6rem;  z-index: 99999;  text-align: center;  color: #ffffff;  border-radius:0.2rem ;  background: #9f9f9f;  }
        .clipbg #clipArea{  width: 100%;  height: 80%;  margin: auto;  }
        .clipbg .footer{  width: 90%;  position: fixed;  left: 5%;  bottom: 0px;  text-align: center;  }
        .clipbg dl{  background: #ffffff;  border-radius: 0.4rem;  overflow: hidden;  margin-bottom: 0.6rem;  }
        .clipbg dd{  position: relative;  height: 0.5rem;  line-height: 0.5rem;  border-bottom:1px solid #999999 ;  }
        .clipbg .back{  height: 0.5rem;  line-height: 0.5rem;  border-radius: 0.4rem;  margin-bottom: 0.4rem;  background: #ffffff;  }
        .clipbg dd input{  position: absolute;  width: 100%;  height: 100%;  top: 0;  left: 0;  z-index: 11;  filter:alpha(opacity=0);  -moz-opacity:0;  -khtml-opacity: 0;  opacity: 0;  }
        .nv_choose{width:1.38rem;height:.38rem;background: url(http://n.sinaimg.cn/jiangsu/defb042b/20170919/nv_choose.png) no-repeat center;background-size: 100%;left:1.73rem;top:17%;}
        .nv_cancel{width:1.38rem;height:.38rem;background: url(http://n.sinaimg.cn/jiangsu/defb042b/20170919/nv_cancel.png) no-repeat center;background-size: 100%;left:1.73rem;top:17%;}
        .nan_cancel{width:1.38rem;height:.38rem;background: url(http://n.sinaimg.cn/jiangsu/defb042b/20170919/nan_cancel.png) no-repeat center;background-size: 100%;left:3.33rem;top:17%;}
        .nan_choose{width:1.38rem;height:.38rem;background: url(http://n.sinaimg.cn/jiangsu/defb042b/20170919/nan_choose.png) no-repeat center;background-size: 100%;left:3.33rem;top:17%;}
    </style>
    <script>
        //	在页面head写入以下代码，实时更新html的fontsize:
        window['adaptive'].desinWidth = 640;
        window['adaptive'].baseFont = 24;
        window['adaptive'].maxWidth = 480;
        window['adaptive'].init();
        // 自动播放音乐效果，解决微信自动播放问题

    </script>

</head>

<body >

<div class="swiper-container">
    <div class="music">
        <i class="icon-music open" num="1"></i>
        <i class="music-span"></i>
        <audio id="aud" src=""  loop="loop" autoplay="autoplay"></audio>
        <div class="music_text">开启</div>
    </div>

    <div class="swiper-wrapper">
        <!--1-->
        <div class="swiper-slide swiper-no-swiping">
            <img src="http://n.sinaimg.cn/jiangsu/defb042b/20170919/tu1.png" class=" ani resize tu1" style="width:100%; height:100%;left:0px;top:0px; ">
            <img src="http://n.sinaimg.cn/jiangsu/defb042b/20170919/tu2.png" class=" ani resize tu2" style="width:100%; height:100%;left:0px;top:0px; display: none;">
            <img src="http://n.sinaimg.cn/jiangsu/defb042b/20170919/bg2.png" class=" ani resize" style="width:100%; height:100%;left:0px;top:0px; ">

             <div class="ani resize nv nv_choose"></div><div class="ani resize nan nan_cancel"></div>

             <div style="width:2.55rem;height:2.63rem;left:1.9rem;top:42%;z-index: -1;" class=" ani resize tu1" >
                 <img class="selecteImg" style="width:2.55rem;height:2.63rem;"/>
             </div>
             <div style="width:2.55rem;height:2.63rem;left: 1.95rem;top: 44%;z-index: -1;display: none;" class=" ani resize tu2" >
                 <img class="selecteImg" style="width:2.55rem;height:2.63rem;"/>
             </div>

             //<!--图片裁剪-->
             <div class="clipbg displaynone">
                 <div id="clipArea"></div>
                 <div class="loading displaynone">正在载入图片...</div>
                 <div class="footer">
                     <dl>
                         <dd style="background: #fe1041; color: #ffffff;border: none;">打开相册<input type="file" id="file" accept="image/*" ></dd>
                         <dd id="clipBtn">完成裁剪</dd>
                     </dl>
                     <div class="back">取消</div>
                 </div>
             </div>

             <a href="javascript:;" class=" ani resize file">
             </a>
             <div style="width:2.38rem;height:1.06rem;left:3.29rem;top:85%;background: url(http://n.sinaimg.cn/jiangsu/2017ks/share1.png) no-repeat center;background-size: 100%;" class=" ani resize" ></div>
        </div>



    </div>
</div>
<script src="http://n.sinaimg.cn/7106709f/20150922/swiper.min.js"></script>
<script src="http://n.sinaimg.cn/7106709f/20150922/swiper.animate.min.js"></script>
<script src="http://i2.sinaimg.cn/cj/dfz/js/base.js" type="text/javascript"></script>
<script type="text/javascript" src="http://n.sinaimg.cn/jiangsu/defb042b/20170919/hammer.min.js" ></script>
<script type="text/javascript" src="http://n.sinaimg.cn/jiangsu/defb042b/20170919/lrz.all.bundle.js" ></script>
<script type="text/javascript" src="http://n.sinaimg.cn/jiangsu/defb042b/20170919/iscroll-zoom-min.js" ></script>
<script type="text/javascript" src="http://n.sinaimg.cn/jiangsu/defb042b/20170919/PhotoClip.js" ></script>
<script>
    var mySwiper = new Swiper ('.swiper-container', {
        direction : 'vertical',
        mousewheelControl : true,
        lazyLoading : true,
        onInit: function(swiper){ //Swiper2.x的初始化是onFirstInit
            swiperAnimate(swiper);
        },
        onSlideChangeEnd: function(swiper){
            swiperAnimate(swiper); //每个slide切换结束时也运行当前slide动画
        }
    })
    function jumpto(n){
        mySwiper.slideTo(n, 1000, true);//切换到第一个slide，速度为1秒
    }

    $(".file").click(function(){
        $(".clipbg").fadeIn()
    })

    $(".back").click(function(){
        $(".clipbg").fadeOut()
    })
    $(".nv").click(function () {
        $(this).addClass("nv_choose");
        $(this).removeClass("nv_cancel");
        $(".nan").removeClass("nan_choose");
        $(".nan").addClass("nan_cancel");
        $(".tu1").show();
        $(".tu2").hide();
    })
    $(".nan").click(function () {
        $(this).addClass("nan_choose");
        $(".nv").removeClass("nv_choose");
        $(".nv").addClass("nv_cancel");
        $(".tu2").show();
        $(".tu1").hide();
    })
    var clipArea = new  PhotoClip("#clipArea", {
        size: [300, 300],//裁剪框大小
        outputSize:[0,0],//打开图片大小，[0,0]表示原图大小
        file: "#file",
        ok: "#clipBtn",
        loadStart: function() { //图片开始加载的回调函数。this 指向当前 PhotoClip 的实例对象，并将正在加载的 file 对象作为参数传入。（如果是使用非 file 的方式加载图片，则该参数为图片的 url）
            $(".loading").removeClass("displaynone");

        },
        loadComplete: function() {//图片加载完成的回调函数。this 指向当前 PhotoClip 的实例对象，并将图片的 <img> 对象作为参数传入。
            $(".loading").addClass("displaynone");

        },
        done: function(dataURL) { //裁剪完成的回调函数。this 指向当前 PhotoClip 的实例对象，会将裁剪出的图像数据DataURL作为参数传入。
            console.log(dataURL);//dataURL裁剪后图片地址base64格式提交给后台处理
            $(".selecteImg").attr("src",dataURL);
            $(".clipbg").fadeOut()
        }
    });


    $(".hc").click(function () {
        var x = $(".photos").offset().left;
        var y = $(".photos").offset().top;
        var w = x+$(".photos").width();
        var h = y-$(".photos").height();
        alert("get---"+x+"--"+y);
        photourl= $("#cut").css("background-image").replace('url("','').replace('")','');
        alert($("#cut").css("background-image"));
        alert("getphoto---"+photourl);
    })

</script>

<script>
    shareDataF={
        title:"昆山h5",
        desc:"昆山h5",
        link:"http://jiangsu.sina.com.cn/zt_d/dvksx",
        imgUrl:"http://n.sinaimg.cn/jiangsu/defb042b/20170918/ks.png"
    };
    shareDataT={
        title:"昆山h5",
        link:"http://jiangsu.sina.com.cn/zt_d/dvksx",
        imgUrl:"http://n.sinaimg.cn/jiangsu/defb042b/20170918/ks.png"
    };
    function WechatConfig(){
        this.debug=true;this.appId="";this.timestamp="";this.nonceStr="";this.signature="";this.jsApiList=null
    }
    var wechatClient=null;
    function wxShare(){
        wx.ready(function(){
            wx.onMenuShareAppMessage(shareDataF);
            wx.onMenuShareTimeline(shareDataT);
            wx.onMenuShareQQ(shareDataF)
        });
        wx.error(function(a){})
    }
    function wxShareConfig(){
        $sd_wx_url="http://zt.jiangsusina.com/weixinf/wx_share.php";
        $.get($sd_wx_url,{url:window.location.href},function(a){
                wechatClient.debug=false;
                wechatClient.appId=a["appId"];
                wechatClient.jsApiList=["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","chooseImage", "previewImage", "uploadImage", "downloadImage","getLocalImgData"];
                wechatClient.nonceStr=a["nonceStr"];
                wechatClient.signature=a["signature"];
                wechatClient.timestamp=a["timestamp"];
                wx.config(wechatClient);
                wxShare()}
            ,"jsonp")
    }
    $(function(){wechatClient=new WechatConfig();wxShareConfig()});
</script>
</body>
</html>